{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Get token from localStorage\nconst getToken = () => {\n  return localStorage.getItem('rypeToken');\n};\nconst handleResponse = async response => {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({\n      error: 'Network error'\n    }));\n    throw new Error(error.error || `HTTP error! status: ${response.status}`);\n  }\n  return response.json();\n};\nexport const api = {\n  async request(endpoint, options = {}) {\n    const token = getToken();\n    const url = `${API_BASE_URL}${endpoint}`;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...(token && {\n          Authorization: `Bearer ${token}`\n        }),\n        ...options.headers\n      },\n      ...options\n    };\n    if (options.body) {\n      config.body = JSON.stringify(options.body);\n    }\n    try {\n      console.log(`üîÑ API Call: ${url}`, config);\n      const response = await fetch(url, config);\n      return await handleResponse(response);\n    } catch (error) {\n      console.error('‚ùå API Request failed:', error);\n      throw error;\n    }\n  },\n  // Auth endpoints\n  async register(userData) {\n    const result = await this.request('/register', {\n      method: 'POST',\n      body: userData\n    });\n    if (result.token) {\n      localStorage.setItem('rypeToken', result.token);\n      localStorage.setItem('rypeUser', JSON.stringify(result.user));\n    }\n    return result;\n  },\n  async login(credentials) {\n    const result = await this.request('/login', {\n      method: 'POST',\n      body: credentials\n    });\n    if (result.token) {\n      localStorage.setItem('rypeToken', result.token);\n      localStorage.setItem('rypeUser', JSON.stringify(result.user));\n    }\n    return result;\n  },\n  logout() {\n    localStorage.removeItem('rypeToken');\n    localStorage.removeItem('rypeUser');\n    localStorage.removeItem('rypeCurrentOrder');\n  },\n  // Products endpoints - FIXED\n  async getProducts() {\n    const result = await this.request('/products');\n\n    // Handle different response formats\n    if (result.success && Array.isArray(result.products)) {\n      return result.products;\n    } else if (Array.isArray(result)) {\n      return result;\n    } else {\n      console.warn('Unexpected products response format:', result);\n      return [];\n    }\n  },\n  async getProduct(id) {\n    const result = await this.request(`/products/${id}`);\n    return result.product || result;\n  },\n  // Orders endpoints - FIXED\n  async createOrder(orderData) {\n    console.log('üì¶ Creating order with data:', orderData);\n    const result = await this.request('/orders', {\n      method: 'POST',\n      body: orderData\n    });\n    console.log('‚úÖ Order creation response:', result);\n    return result;\n  },\n  async getUserOrders() {\n    const result = await this.request('/orders/my-orders');\n    return result;\n  },\n  async getOrder(orderId) {\n    const result = await this.request(`/orders/${orderId}`);\n    return result;\n  },\n  // Admin endpoints\n  async getAdminStats() {\n    const result = await this.request('/admin/stats');\n    return result;\n  },\n  async getAdminOrders() {\n    const result = await this.request('/admin/orders');\n    return result;\n  },\n  async updateOrderStatus(orderId, status) {\n    return this.request(`/admin/orders/${orderId}/status`, {\n      method: 'PUT',\n      body: {\n        status\n      }\n    });\n  },\n  // User profile endpoints\n  async getProfile() {\n    const result = await this.request('/profile');\n    return result;\n  },\n  async updateProfile(profileData) {\n    return this.request('/profile', {\n      method: 'PUT',\n      body: profileData\n    });\n  }\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","getToken","localStorage","getItem","handleResponse","response","ok","error","json","catch","Error","status","api","request","endpoint","options","token","url","config","headers","Authorization","body","JSON","stringify","console","log","fetch","register","userData","result","method","setItem","user","login","credentials","logout","removeItem","getProducts","success","Array","isArray","products","warn","getProduct","id","product","createOrder","orderData","getUserOrders","getOrder","orderId","getAdminStats","getAdminOrders","updateOrderStatus","getProfile","updateProfile","profileData"],"sources":["D:/SEM V/Intenship Project/fresh-juice-app/frontend/src/services/api.js"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n\r\n// Get token from localStorage\r\nconst getToken = () => {\r\n  return localStorage.getItem('rypeToken');\r\n};\r\n\r\nconst handleResponse = async (response) => {\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ error: 'Network error' }));\r\n    throw new Error(error.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n  return response.json();\r\n};\r\n\r\nexport const api = {\r\n  async request(endpoint, options = {}) {\r\n    const token = getToken();\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    \r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...(token && { Authorization: `Bearer ${token}` }),\r\n        ...options.headers,\r\n      },\r\n      ...options,\r\n    };\r\n\r\n    if (options.body) {\r\n      config.body = JSON.stringify(options.body);\r\n    }\r\n\r\n    try {\r\n      console.log(`üîÑ API Call: ${url}`, config);\r\n      const response = await fetch(url, config);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('‚ùå API Request failed:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Auth endpoints\r\n  async register(userData) {\r\n    const result = await this.request('/register', {\r\n      method: 'POST',\r\n      body: userData\r\n    });\r\n    if (result.token) {\r\n      localStorage.setItem('rypeToken', result.token);\r\n      localStorage.setItem('rypeUser', JSON.stringify(result.user));\r\n    }\r\n    return result;\r\n  },\r\n\r\n  async login(credentials) {\r\n    const result = await this.request('/login', {\r\n      method: 'POST',\r\n      body: credentials\r\n    });\r\n    if (result.token) {\r\n      localStorage.setItem('rypeToken', result.token);\r\n      localStorage.setItem('rypeUser', JSON.stringify(result.user));\r\n    }\r\n    return result;\r\n  },\r\n\r\n  logout() {\r\n    localStorage.removeItem('rypeToken');\r\n    localStorage.removeItem('rypeUser');\r\n    localStorage.removeItem('rypeCurrentOrder');\r\n  },\r\n\r\n  // Products endpoints - FIXED\r\n  async getProducts() {\r\n    const result = await this.request('/products');\r\n    \r\n    // Handle different response formats\r\n    if (result.success && Array.isArray(result.products)) {\r\n      return result.products;\r\n    } else if (Array.isArray(result)) {\r\n      return result;\r\n    } else {\r\n      console.warn('Unexpected products response format:', result);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  async getProduct(id) {\r\n    const result = await this.request(`/products/${id}`);\r\n    return result.product || result;\r\n  },\r\n\r\n  // Orders endpoints - FIXED\r\n  async createOrder(orderData) {\r\n    console.log('üì¶ Creating order with data:', orderData);\r\n    const result = await this.request('/orders', {\r\n      method: 'POST',\r\n      body: orderData\r\n    });\r\n    console.log('‚úÖ Order creation response:', result);\r\n    return result;\r\n  },\r\n\r\n  async getUserOrders() {\r\n    const result = await this.request('/orders/my-orders');\r\n    return result;\r\n  },\r\n\r\n  async getOrder(orderId) {\r\n    const result = await this.request(`/orders/${orderId}`);\r\n    return result;\r\n  },\r\n\r\n  // Admin endpoints\r\n  async getAdminStats() {\r\n    const result = await this.request('/admin/stats');\r\n    return result;\r\n  },\r\n\r\n  async getAdminOrders() {\r\n    const result = await this.request('/admin/orders');\r\n    return result;\r\n  },\r\n\r\n  async updateOrderStatus(orderId, status) {\r\n    return this.request(`/admin/orders/${orderId}/status`, {\r\n      method: 'PUT',\r\n      body: { status }\r\n    });\r\n  },\r\n\r\n  // User profile endpoints\r\n  async getProfile() {\r\n    const result = await this.request('/profile');\r\n    return result;\r\n  },\r\n\r\n  async updateProfile(profileData) {\r\n    return this.request('/profile', {\r\n      method: 'PUT',\r\n      body: profileData\r\n    });\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}