{"ast":null,"code":"import _objectSpread from\"D:/SEM V/Intenship Project/fresh-juice-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Get token from localStorage\nconst getToken=()=>{return localStorage.getItem('rypeToken');};const handleResponse=async response=>{if(!response.ok){const error=await response.json().catch(()=>({error:'Network error'}));throw new Error(error.error||\"HTTP error! status: \".concat(response.status));}return response.json();};export const api={async request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=getToken();const url=\"\".concat(API_BASE_URL).concat(endpoint);const config=_objectSpread({headers:_objectSpread(_objectSpread({'Content-Type':'application/json'},token&&{Authorization:\"Bearer \".concat(token)}),options.headers)},options);if(options.body){config.body=JSON.stringify(options.body);}try{console.log(\"\\uD83D\\uDD04 API Call: \".concat(url),config);const response=await fetch(url,config);return await handleResponse(response);}catch(error){console.error('‚ùå API Request failed:',error);throw error;}},// Auth endpoints\nasync register(userData){const result=await this.request('/register',{method:'POST',body:userData});if(result.token){localStorage.setItem('rypeToken',result.token);localStorage.setItem('rypeUser',JSON.stringify(result.user));}return result;},async login(credentials){const result=await this.request('/login',{method:'POST',body:credentials});if(result.token){localStorage.setItem('rypeToken',result.token);localStorage.setItem('rypeUser',JSON.stringify(result.user));}return result;},logout(){localStorage.removeItem('rypeToken');localStorage.removeItem('rypeUser');localStorage.removeItem('rypeCurrentOrder');},// Products endpoints - FIXED\nasync getProducts(){const result=await this.request('/products');// Handle different response formats\nif(result.success&&Array.isArray(result.products)){return result.products;}else if(Array.isArray(result)){return result;}else{console.warn('Unexpected products response format:',result);return[];}},async getProduct(id){const result=await this.request(\"/products/\".concat(id));return result.product||result;},// Orders endpoints - FIXED\nasync createOrder(orderData){console.log('üì¶ Creating order with data:',orderData);const result=await this.request('/orders',{method:'POST',body:orderData});console.log('‚úÖ Order creation response:',result);return result;},async getUserOrders(){const result=await this.request('/orders/my-orders');return result;},async getOrder(orderId){const result=await this.request(\"/orders/\".concat(orderId));return result;},// Admin endpoints\nasync getAdminStats(){const result=await this.request('/admin/stats');return result;},async getAdminOrders(){const result=await this.request('/admin/orders');return result;},async updateOrderStatus(orderId,status){return this.request(\"/admin/orders/\".concat(orderId,\"/status\"),{method:'PUT',body:{status}});},// User profile endpoints\nasync getProfile(){const result=await this.request('/profile');return result;},async updateProfile(profileData){return this.request('/profile',{method:'PUT',body:profileData});}};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","getToken","localStorage","getItem","handleResponse","response","ok","error","json","catch","Error","concat","status","api","request","endpoint","options","arguments","length","undefined","token","url","config","_objectSpread","headers","Authorization","body","JSON","stringify","console","log","fetch","register","userData","result","method","setItem","user","login","credentials","logout","removeItem","getProducts","success","Array","isArray","products","warn","getProduct","id","product","createOrder","orderData","getUserOrders","getOrder","orderId","getAdminStats","getAdminOrders","updateOrderStatus","getProfile","updateProfile","profileData"],"sources":["D:/SEM V/Intenship Project/fresh-juice-app/frontend/src/services/api.js"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Get token from localStorage\r\nconst getToken = () => {\r\n  return localStorage.getItem('rypeToken');\r\n};\r\n\r\nconst handleResponse = async (response) => {\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ error: 'Network error' }));\r\n    throw new Error(error.error || `HTTP error! status: ${response.status}`);\r\n  }\r\n  return response.json();\r\n};\r\n\r\nexport const api = {\r\n  async request(endpoint, options = {}) {\r\n    const token = getToken();\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    \r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...(token && { Authorization: `Bearer ${token}` }),\r\n        ...options.headers,\r\n      },\r\n      ...options,\r\n    };\r\n\r\n    if (options.body) {\r\n      config.body = JSON.stringify(options.body);\r\n    }\r\n\r\n    try {\r\n      console.log(`üîÑ API Call: ${url}`, config);\r\n      const response = await fetch(url, config);\r\n      return await handleResponse(response);\r\n    } catch (error) {\r\n      console.error('‚ùå API Request failed:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Auth endpoints\r\n  async register(userData) {\r\n    const result = await this.request('/register', {\r\n      method: 'POST',\r\n      body: userData\r\n    });\r\n    if (result.token) {\r\n      localStorage.setItem('rypeToken', result.token);\r\n      localStorage.setItem('rypeUser', JSON.stringify(result.user));\r\n    }\r\n    return result;\r\n  },\r\n\r\n  async login(credentials) {\r\n    const result = await this.request('/login', {\r\n      method: 'POST',\r\n      body: credentials\r\n    });\r\n    if (result.token) {\r\n      localStorage.setItem('rypeToken', result.token);\r\n      localStorage.setItem('rypeUser', JSON.stringify(result.user));\r\n    }\r\n    return result;\r\n  },\r\n\r\n  logout() {\r\n    localStorage.removeItem('rypeToken');\r\n    localStorage.removeItem('rypeUser');\r\n    localStorage.removeItem('rypeCurrentOrder');\r\n  },\r\n\r\n  // Products endpoints - FIXED\r\n  async getProducts() {\r\n    const result = await this.request('/products');\r\n    \r\n    // Handle different response formats\r\n    if (result.success && Array.isArray(result.products)) {\r\n      return result.products;\r\n    } else if (Array.isArray(result)) {\r\n      return result;\r\n    } else {\r\n      console.warn('Unexpected products response format:', result);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  async getProduct(id) {\r\n    const result = await this.request(`/products/${id}`);\r\n    return result.product || result;\r\n  },\r\n\r\n  // Orders endpoints - FIXED\r\n  async createOrder(orderData) {\r\n    console.log('üì¶ Creating order with data:', orderData);\r\n    const result = await this.request('/orders', {\r\n      method: 'POST',\r\n      body: orderData\r\n    });\r\n    console.log('‚úÖ Order creation response:', result);\r\n    return result;\r\n  },\r\n\r\n  async getUserOrders() {\r\n    const result = await this.request('/orders/my-orders');\r\n    return result;\r\n  },\r\n\r\n  async getOrder(orderId) {\r\n    const result = await this.request(`/orders/${orderId}`);\r\n    return result;\r\n  },\r\n\r\n  // Admin endpoints\r\n  async getAdminStats() {\r\n    const result = await this.request('/admin/stats');\r\n    return result;\r\n  },\r\n\r\n  async getAdminOrders() {\r\n    const result = await this.request('/admin/orders');\r\n    return result;\r\n  },\r\n\r\n  async updateOrderStatus(orderId, status) {\r\n    return this.request(`/admin/orders/${orderId}/status`, {\r\n      method: 'PUT',\r\n      body: { status }\r\n    });\r\n  },\r\n\r\n  // User profile endpoints\r\n  async getProfile() {\r\n    const result = await this.request('/profile');\r\n    return result;\r\n  },\r\n\r\n  async updateProfile(profileData) {\r\n    return this.request('/profile', {\r\n      method: 'PUT',\r\n      body: profileData\r\n    });\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}