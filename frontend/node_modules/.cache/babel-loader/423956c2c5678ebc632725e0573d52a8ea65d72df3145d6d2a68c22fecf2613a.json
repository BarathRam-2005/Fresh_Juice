{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{api}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderHistory=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{loadOrderHistory();},[]);const loadOrderHistory=async()=>{try{const result=await api.getUserOrders();if(result.success){setOrders(result.orders);}else{setError('Failed to load order history');}}catch(error){console.error('Failed to load order history:',error);setError('Failed to load order history. Please try again.');}finally{setLoading(false);}};const getStatusColor=status=>{switch(status){case'delivered':return'var(--success)';case'cancelled':return'var(--error)';case'pending':return'var(--warning)';default:return'var(--primary)';}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading your order history...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"order-history-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Order History\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View your past orders and track current ones\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:loadOrderHistory,className:\"btn-primary\",children:\"Try Again\"})]}),orders.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"No Orders Yet\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You haven't placed any orders yet. Start by exploring our delicious juices!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"empty-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>navigate('/menu'),children:\"Browse Menu\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>navigate('/'),children:\"Go Home\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"orders-container\",children:orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-info\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Order \",order.orderId]}),/*#__PURE__*/_jsx(\"span\",{className:\"order-status\",style:{color:getStatusColor(order.status)},children:order.status.charAt(0).toUpperCase()+order.status.slice(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"order-date\",children:formatDate(order.createdAt)}),/*#__PURE__*/_jsxs(\"span\",{className:\"order-total\",children:[\"$\",order.total.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-items\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Items:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"items-list\",children:order.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-image\",children:item.image}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"strong\",{children:item.name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Qty: \",item.quantity]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-price\",children:[\"$\",(item.price*item.quantity).toFixed(2)]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivery to:\"}),/*#__PURE__*/_jsx(\"span\",{children:order.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>navigate('/track'),children:\"Track Order\"}),order.status==='delivered'&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>navigate('/menu'),children:\"Reorder\"})]})]})]},order._id))})]});};export default OrderHistory;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","api","jsx","_jsx","jsxs","_jsxs","OrderHistory","orders","setOrders","loading","setLoading","error","setError","navigate","loadOrderHistory","result","getUserOrders","success","console","getStatusColor","status","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","className","children","onClick","length","map","order","orderId","style","color","charAt","toUpperCase","slice","createdAt","total","toFixed","items","item","index","image","name","quantity","price","address","_id"],"sources":["D:/SEM V/Intenship Project/fresh-juice-app/frontend/src/pages/OrderHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { api } from '../services/api';\r\n\r\nconst OrderHistory = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    loadOrderHistory();\r\n  }, []);\r\n\r\n  const loadOrderHistory = async () => {\r\n    try {\r\n      const result = await api.getUserOrders();\r\n      if (result.success) {\r\n        setOrders(result.orders);\r\n      } else {\r\n        setError('Failed to load order history');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load order history:', error);\r\n      setError('Failed to load order history. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'delivered': return 'var(--success)';\r\n      case 'cancelled': return 'var(--error)';\r\n      case 'pending': return 'var(--warning)';\r\n      default: return 'var(--primary)';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading your order history...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"order-history-page\">\r\n      <div className=\"page-header\">\r\n        <h1>Order History</h1>\r\n        <p>View your past orders and track current ones</p>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"error-state\">\r\n          <p>{error}</p>\r\n          <button onClick={loadOrderHistory} className=\"btn-primary\">\r\n            Try Again\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {orders.length === 0 ? (\r\n        <div className=\"empty-state\">\r\n          <div className=\"empty-icon\">ðŸ“¦</div>\r\n          <h2>No Orders Yet</h2>\r\n          <p>You haven't placed any orders yet. Start by exploring our delicious juices!</p>\r\n          <div className=\"empty-actions\">\r\n            <button \r\n              className=\"btn-primary\"\r\n              onClick={() => navigate('/menu')}\r\n            >\r\n              Browse Menu\r\n            </button>\r\n            <button \r\n              className=\"btn-secondary\"\r\n              onClick={() => navigate('/')}\r\n            >\r\n              Go Home\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"orders-container\">\r\n          {orders.map(order => (\r\n            <div key={order._id} className=\"order-card\">\r\n              <div className=\"order-header\">\r\n                <div className=\"order-info\">\r\n                  <h3>Order {order.orderId}</h3>\r\n                  <span \r\n                    className=\"order-status\"\r\n                    style={{ color: getStatusColor(order.status) }}\r\n                  >\r\n                    {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\r\n                  </span>\r\n                </div>\r\n                <div className=\"order-meta\">\r\n                  <span className=\"order-date\">{formatDate(order.createdAt)}</span>\r\n                  <span className=\"order-total\">${order.total.toFixed(2)}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"order-items\">\r\n                <h4>Items:</h4>\r\n                <div className=\"items-list\">\r\n                  {order.items.map((item, index) => (\r\n                    <div key={index} className=\"order-item\">\r\n                      <span className=\"item-image\">{item.image}</span>\r\n                      <div className=\"item-details\">\r\n                        <strong>{item.name}</strong>\r\n                        <span>Qty: {item.quantity}</span>\r\n                      </div>\r\n                      <span className=\"item-price\">\r\n                        ${(item.price * item.quantity).toFixed(2)}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"order-footer\">\r\n                <div className=\"delivery-info\">\r\n                  <strong>Delivery to:</strong>\r\n                  <span>{order.address}</span>\r\n                </div>\r\n                <div className=\"order-actions\">\r\n                  <button \r\n                    className=\"btn-secondary\"\r\n                    onClick={() => navigate('/track')}\r\n                  >\r\n                    Track Order\r\n                  </button>\r\n                  {order.status === 'delivered' && (\r\n                    <button \r\n                      className=\"btn-primary\"\r\n                      onClick={() => navigate('/menu')}\r\n                    >\r\n                      Reorder\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}